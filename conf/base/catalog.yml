
# --- Raw Downloads

msha_accidents:
  type: msha.io.http.CSVHTTPDataSet
  file_url: "https://arlweb.msha.gov/OpenGovernmentData/DataSets/Accidents.zip"
  file_path: data/01_raw/msha_accidents.zip
  force_download: False
  load_args:
    sep: '|'
    encoding: latin
    dtype: {'ACCIDENT_TIME': str}
    parse_dates: ['ACCIDENT_DT']
    na_values: ['NO VALUE FOUND']

msha_mines:
  type: msha.io.http.CSVHTTPDataSet
  file_url: "https://arlweb.msha.gov/OpenGovernmentData/DataSets/Mines.zip"
  file_path: data/01_raw/msha_mines.zip
  force_download: False
  load_args:
    sep: '|'
    encoding: latin
    parse_dates: ['CURRENT_STATUS_DT', 'CURRENT_CONTROLLER_BEGIN_DT']
    na_values: ['NO VALUE FOUND']

msha_production:
  type: msha.io.http.CSVHTTPDataSet
  file_url: "https://arlweb.msha.gov/OpenGovernmentData/DataSets/MinesProdQuarterly.zip"
  file_path: data/01_raw/msha_production.zip
  force_download: False
  load_args:
    sep: "|"
    encoding: latin
    na_values: ['NO VALUE FOUND']

# --- pre processing dataframes

pp_accidents:
  type: pickle.PickleDataSet
  filepath: data/02_clean/accidents.pkl

pp_production:
  type: pickle.PickleDataSet
  filepath: data/02_clean/production.pkl

pp_mines:
  type: pickle.PickleDataSet
  filepath: data/02_clean/mines.pkl


# --- Coal specific

# A dataframe with ug coal production aggregated by quarter
coal_production_agg:
  type: pickle.PickleDataSet
  filepath: data/coal_01_aggs/coal_ug_production.pkl

# A dataframe with ug coal accidents of all types which caused
# injury, aggregated by quarter
coal_accidents_agg:
  type: pickle.PickleDataSet
  filepath: data/coal_01_aggs/coal_ug_accidents.pkl

# A dataframe with ug coal ground control related accidents.
# columns are severity classification.
coal_gc_accidents_agg:
  type: pickle.PickleDataSet
  filepath: data/coal_01_aggs/coal_ug_gc_accients.pkl

# A dataframe with ug coal ground control related accidents.
# columns are severity classification.
coal_gc_accidents_normalized_agg:
  type: pickle.PickleDataSet
  filepath: data/coal_01_aggs/accidents_normalized.pkl

